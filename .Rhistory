summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
summary(gbm.orch)
data$accounts$geo.state = ""
rawData$accounts$geo.state = ""
merge(rawData$accounts, geo, by="account.id", all.x=T)
geo = read.csv('data/geo.account.csv',colClasses='character')
merge(rawData$accounts, geo, by="account.id", all.x=T)
rawData$accounts$geo.state = merge(rawData$accounts, geo, by="account.id", all.x=T)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
rm(rawData)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
geo = read.csv('data/geo.account.csv',colClasses='character')
t <- return (list("train"=train, "subscriptions"=subscriptions, "accounts"=accounts, "concert"=concert, "tickets"=tickets, "concert_table"=concert_table, "geo"=geo))
train = read.csv('data/train.csv')
t <- return (list("train"=train, "subscriptions"=subscriptions, "accounts"=accounts, "concert"=concert, "tickets"=tickets, "concert_table"=concert_table, "geo"=geo))
names(geo)
geo = read.csv('data/geo.account.csv',colClasses='character')
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
geo = read.csv('data/geo.account.csv',colClasses='character')
rawData$accounts$geo.state = merge(rawData$accounts, rawData$geo[, c(2,5], by="account.id", all.x=T)
data$accounts$geo.state = ""
rawData$accounts$geo.state = ""
rawData$accounts$geo.state = merge(rawData$accounts, rawData$geo[, c(2,5], by="account.id", all.x=T)
rawData$accounts$geo.state = merge(rawData$accounts, rawData$geo[, c(2,5)], by="account.id", all.x=T)
rawData$accounts$geo.state = ""
merge?
?merge
rawData$accounts$geo.state = ""
rawData$accounts$geo.state = merge(rawData$accounts, rawData$geo[, c("account.id", "State")], by="account.id", all.x=T)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
geo = read.csv('data/geo.account.csv',colClasses='character')
states = geo[, c("account.id", "State")]
# path to kaggle data and other files
#setwd("C:\\Users\\mlewo_000\\Documents\\GitHub\\https---github.com-MatthewSchumwinger-towerProperty\\towerProperty")
setwd("~/Documents/towerProperty") # Matt's wd path
source("config.r")
source("helpers.r")
source("data.r")
library(gbm)
setConfigForMyEnvironment() # special helper function for Matt's environment
validationRatio = 0.15
filter = "199|200|price|add_no|MOZART|ROSSINI|conc_missed|add_tickets|section_2013_2014|add_donated.2013|multiple.subs|package|billing.city|section"
useLogTransform = FALSE
trees = 4000
bagfrac = 0.5
shrinkage = .001
depth = 8
includeLibraries()
rawData = readData(useLogTransform)
# for some reasom gbm is not picking that up in the function
polyOrder = 2
formula = prepareFormula(useLogTransform)
seeds = c(234294, 340549, 879138, 188231, 646946, 160318, 853181, 551724, 398728, 323126)
testError = 0
for(seed in seeds) {
set.seed(seed)
data = preparePredictors(rawData, filter, validationRatio)
#  data = cleanData(data)
gbm.orch = gbm(formula, data = data$trainSet, distribution = "gaussian",
bag.fraction = bagfrac, shrinkage = shrinkage, n.trees = trees, interaction.depth = depth)
summary(gbm.orch)
gbm.boost = predict(gbm.orch , newdata=data$testSet, n.trees=trees)
testError = testError + evaluateModel(gbm.boost, data$testAnswers, useLogTransform)
}
tries = length(seeds)
print(paste("Final test error=", testError / tries, " based on ", tries, " tries"))
summary(gbm.orch)
